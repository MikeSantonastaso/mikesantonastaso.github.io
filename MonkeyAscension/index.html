<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monkey Ascension v0.5</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #fffbea;
      color: #333;
      text-align: center;
      padding: 40px;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .left-column {
      flex: 1 1 400px;
    }

    .right-column {
      flex: 1 1 300px;
      max-width: 300px;
    }

    .button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
    }

    .stats, .tech {
      margin-top: 20px;
      border: 2px solid #aaa;
      padding: 15px;
      background-color: #fff6cc;
      border-radius: 8px;
    }

    .log {
  border: 2px solid #aaa;
  background-color: #f9f9e3;
  padding: 10px;
  font-size: 0.9em;
  color: #444;
  border-radius: 8px;
  text-align: left;
  overflow: hidden;
  height: 324px; /* Added fixed height */
  /* max-height: none; can be removed as height now controls it */
}
  </style>
</head>
<body>

  <h1>üêí Monkey Ascension üêí</h1>
  <p>Bananas: <span id="bananas">0</span></p>
  <button class="button" onclick="gatherBananas()">üçå Gather Banana</button>

  <div class="container">
    <div class="left-column">
      <div class="stats">
        <h3>Monkeys</h3>
        <p>Basic Monkeys: <span id="monkeys">0</span> (+1/sec each)</p>
        <button class="button" onclick="buyMonkey()">Buy Monkey (Cost: <span id="monkeyCost">10</span>)</button>

        <p>Farmer Monkeys: <span id="farmerMonkeys">0</span> (+2/sec each)</p>
        <button class="button" onclick="buyFarmerMonkey()">Buy Farmer Monkey (Cost: <span id="farmerCost">25</span>)</button>

        <p>Scholar Monkeys: <span id="scholarMonkeys">0</span></p>
        <button class="button" onclick="buyScholarMonkey()">Buy Scholar Monkey (Cost: <span id="scholarCost">50</span>)</button>

        <p>Total Banana Income: <span id="incomePerSecond">0</span> bananas/sec</p>
      </div>

      <div class="tech" id="techUpgrades" style="display:none;">
        <h3>Tech Upgrades</h3>
        <button class="button" id="foragingBtn" onclick="buyTech('foraging')">Loading...</button><br>
        <button class="button" id="mathBtn" onclick="buyTech('math')">Loading...</button>
      </div>
    </div>

    <div class="right-column">
      <div class="log" id="logBox">
        Welcome to the jungle of knowledge...
      </div>
    </div>
  </div>

  <script src="main.js">
    let bananas = 0;

    let monkeys = 0;
    let farmerMonkeys = 0;
    let scholarMonkeys = 0;

    let monkeyCost = 10;
    let farmerCost = 25;
    let scholarCost = 50;

    let tech = {
      foraging: { level: 0, baseCost: 100, costMult: 1.5 },
      math: { level: 0, baseCost: 150, costMult: 1.6 }
    };

    function gatherBananas() {
      bananas++;
      log("You picked a banana! üçå");
      updateDisplay();
    }

    function buyMonkey() {
      if (bananas >= monkeyCost) {
        bananas -= monkeyCost;
        monkeys++;
        monkeyCost = Math.floor(monkeyCost * 1.3);
        log("Basic monkey joined you! üêí");
        updateDisplay();
      } else {
        log("Not enough bananas!");
      }
    }

    function buyFarmerMonkey() {
      if (bananas >= farmerCost) {
        bananas -= farmerCost;
        farmerMonkeys++;
        farmerCost = Math.floor(farmerCost * 1.4);
        log("Farmer monkey is ready to farm! üë®‚Äçüåæüêµ");
        updateDisplay();
      } else {
        log("Not enough bananas!");
      }
    }

    function buyScholarMonkey() {
      if (bananas >= scholarCost) {
        bananas -= scholarCost;
        scholarMonkeys++;
        scholarCost = Math.floor(scholarCost * 1.6);
        log("A scholar monkey starts thinking... üß†üêí");
        document.getElementById("techUpgrades").style.display = "block";
        updateDisplay();
      } else {
        log("Not enough bananas!");
      }
    }

    function buyTech(type) {
      const upgrade = tech[type];
      const currentLevel = upgrade.level;
      const cost = Math.floor(upgrade.baseCost * Math.pow(upgrade.costMult, currentLevel));
      if (bananas >= cost) {
        bananas -= cost;
        upgrade.level++;
        log(`Tech upgraded: ${type === "foraging" ? "Efficient Foraging" : "Banana Math"} (Level ${upgrade.level})`);
      } else {
        log("Not enough bananas for tech upgrade!");
      }
      updateDisplay();
    }

    function getBananasPerSecond() {
      let income = monkeys * 1 + farmerMonkeys * 2;
      if (tech.foraging.level > 0) {
        income *= (1 + 0.05 * tech.foraging.level);
      }
      if (tech.math.level > 0) {
        income += farmerMonkeys * (0.2 * tech.math.level);
      }
      return income;
    }

    function updateDisplay() {
      document.getElementById("bananas").innerText = Math.floor(bananas).toLocaleString();
      document.getElementById("monkeys").innerText = monkeys;
      document.getElementById("farmerMonkeys").innerText = farmerMonkeys;
      document.getElementById("scholarMonkeys").innerText = scholarMonkeys;
      document.getElementById("monkeyCost").innerText = monkeyCost;
      document.getElementById("farmerCost").innerText = farmerCost;
      document.getElementById("scholarCost").innerText = scholarCost;
      document.getElementById("incomePerSecond").innerText = getBananasPerSecond().toFixed(2);

      const forage = tech.foraging;
      const math = tech.math;
      const forageCost = Math.floor(forage.baseCost * Math.pow(forage.costMult, forage.level));
      const mathCost = Math.floor(math.baseCost * Math.pow(math.costMult, math.level));
      document.getElementById("foragingBtn").innerText =
        `Efficient Foraging (+5% income) ‚Äì Level ${forage.level} ‚Äì Cost: ${forageCost} bananas`;
      document.getElementById("mathBtn").innerText =
        `Banana Math (+10% Farmer income) ‚Äì Level ${math.level} ‚Äì Cost: ${mathCost} bananas`;
    }

    function log(msg) {
      const logBox = document.getElementById("logBox");
      const currentLogs = logBox.innerHTML.trim().split('<br>');
      const timestamp = new Date().toLocaleTimeString();
      const newMsg = `[${timestamp}] ${msg}`;

      currentLogs.unshift(newMsg);
      if (currentLogs.length > 15) currentLogs.length = 15;

      logBox.innerHTML = currentLogs.join('<br>');
    }

    function saveGame() {
      const state = {
        bananas, monkeys, farmerMonkeys, scholarMonkeys,
        monkeyCost, farmerCost, scholarCost, tech
      };
      localStorage.setItem('monkeyAscensionSave', JSON.stringify(state));
    }

    function loadGame() {
      const state = JSON.parse(localStorage.getItem('monkeyAscensionSave'));
      if (state) {
        bananas = state.bananas;
        monkeys = state.monkeys;
        farmerMonkeys = state.farmerMonkeys;
        scholarMonkeys = state.scholarMonkeys;
        monkeyCost = state.monkeyCost;
        farmerCost = state.farmerCost;
        scholarCost = state.scholarCost;
        tech = state.tech;
        if (scholarMonkeys > 0) {
          document.getElementById("techUpgrades").style.display = "block";
        }
      }
    }

    setInterval(saveGame, 5000);

    setInterval(() => {
      bananas += getBananasPerSecond();
      updateDisplay();
    }, 1000);

    window.onload = function () {
      loadGame();
      updateDisplay();
    };
  </script>
</body>
</html>
